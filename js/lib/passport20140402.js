!function(window,undefined){function getStringLen(t){var e=t.match(/[^\x00-\xff]/gi);return t.length+(null==e?0:e.length)}function getBrowserType(){return window.ActiveXObject?window.XMLHttpRequest&&!window.XDomainRequest?5:window.XDomainRequest?6:1:navigator.userAgent.toLowerCase().indexOf("firefox")>=0?2:"object"==typeof window.opera?3:window.MessageEvent&&!document.getBoxObjectFor?7:navigator.appVersion.indexOf("Safari")>=0?4:void 0}function GetXmlHttpObject(){var t=null;try{t=new XMLHttpRequest}catch(e){try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){t=new ActiveXObject("Microsoft.XMLHTTP")}}return t}function parseUrl(t){var e={},i=unescape(t).split("?").length>=2?unescape(t).split("?")[1]:"";if(0===i.length)return e;for(var s,o,n=i.split("&"),r=0,a=n.length;a>r;r++)s=n[r].split("=")[0],o=2==n[r].split("=").length?n[r].split("=")[1]:"","undefined"==typeof e[s]?e[s]=o:"string"==typeof e[s]?e[s]=[].concat(e[s]).concat(o):e[s]=e[s].concat(o);return e}function checkCookieEnabled(){try{if(navigator.cookieEnabled===!1)return!1;var t=new Date,e="testCookie=yes;expires="+new Date(t.getTime()+5e3).toGMTString()+";";if(document.cookie=e,!document.cookie)return!1;e="testCookie=yes;expires="+new Date(t.getTime()-5e3).toGMTString()+";",document.cookie=e}catch(i){return!1}return!0}if(window.PassportSC)return alert("全局变量PassportSC已被占用！"),!1;window.passportSetGlobalName=function(t,e){return window[t]?(alert("全局变量"+t+"已被占用！"),!1):(window[t]=window.PassportSC,void(e&&(window.PassportSC=null,delete window.PassportSC)))},Function.prototype.bindFunc=function(t){if("object"!=typeof t)return!1;var e=this;return function(){return e.apply(t,arguments)}},document.getElementsByClassName||(document.getElementsByClassName=function(t,e){if(!t)return[];for(var i,s=(e||document).getElementsByTagName("*"),o=[],n=0,r=s.length;r>n&&(i=s[n].getAttribute("class")?s[n].getAttribute("class").split(" "):[],0!==i.length);n++)for(var a=0,l=i.length;l>a;a++)if(i[a]===t){o.push(s[n]);break}return o});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,i,s,o,n,r,a,l="",c=0;for(t=this.encodeURL(t),t=Base64._utf8_encode(t);c<t.length;)e=t.charCodeAt(c++),i=t.charCodeAt(c++),s=t.charCodeAt(c++),o=e>>2,n=(3&e)<<4|i>>4,r=(15&i)<<2|s>>6,a=63&s,isNaN(i)?r=a=64:isNaN(s)&&(a=64),l=l+this._keyStr.charAt(o)+this._keyStr.charAt(n)+this._keyStr.charAt(r)+this._keyStr.charAt(a);return l},decode:function(t){var e,i,s,o,n,r,a,l="",c=0;for(t=this.decodeUrl(t),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)o=this._keyStr.indexOf(t.charAt(c++)),n=this._keyStr.indexOf(t.charAt(c++)),r=this._keyStr.indexOf(t.charAt(c++)),a=this._keyStr.indexOf(t.charAt(c++)),e=o<<2|n>>4,i=(15&n)<<4|r>>2,s=(3&r)<<6|a,l+=String.fromCharCode(e),64!=r&&(l+=String.fromCharCode(i)),64!=a&&(l+=String.fromCharCode(s));return l=Base64._utf8_decode(l)},_utf8_encode:function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var s=t.charCodeAt(i);128>s?e+=String.fromCharCode(s):s>127&&2048>s?(e+=String.fromCharCode(s>>6|192),e+=String.fromCharCode(63&s|128)):(e+=String.fromCharCode(s>>12|224),e+=String.fromCharCode(s>>6&63|128),e+=String.fromCharCode(63&s|128))}return e},_utf8_decode:function(t){for(var e="",i=0,s=0,o=0;i<t.length;)s=t.charCodeAt(i),128>s?(e+=String.fromCharCode(s),i++):s>191&&224>s?(o=t.charCodeAt(i+1),e+=String.fromCharCode((31&s)<<6|63&o),i+=2):(o=t.charCodeAt(i+1),c3=t.charCodeAt(i+2),e+=String.fromCharCode((15&s)<<12|(63&o)<<6|63&c3),i+=3);return e},encodeURL:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")},decodeUrl:function(t){var e,i;return t.length%4===0?e=t:(i=t.length%4,e=(t+"===").slice(0,t.length+4-i)),e.replace(/-/g,"+").replace(/_/g,"/")}},MD5=function(t){function e(t){return u(i(h(t),t.length*p))}function i(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var i=1732584193,s=-271733879,c=-1732584194,h=271733878,u=0;u<t.length;u+=16){var d=i,p=s,m=c,f=h;i=o(i,s,c,h,t[u+0],7,-680876936),h=o(h,i,s,c,t[u+1],12,-389564586),c=o(c,h,i,s,t[u+2],17,606105819),s=o(s,c,h,i,t[u+3],22,-1044525330),i=o(i,s,c,h,t[u+4],7,-176418897),h=o(h,i,s,c,t[u+5],12,1200080426),c=o(c,h,i,s,t[u+6],17,-1473231341),s=o(s,c,h,i,t[u+7],22,-45705983),i=o(i,s,c,h,t[u+8],7,1770035416),h=o(h,i,s,c,t[u+9],12,-1958414417),c=o(c,h,i,s,t[u+10],17,-42063),s=o(s,c,h,i,t[u+11],22,-1990404162),i=o(i,s,c,h,t[u+12],7,1804603682),h=o(h,i,s,c,t[u+13],12,-40341101),c=o(c,h,i,s,t[u+14],17,-1502002290),s=o(s,c,h,i,t[u+15],22,1236535329),i=n(i,s,c,h,t[u+1],5,-165796510),h=n(h,i,s,c,t[u+6],9,-1069501632),c=n(c,h,i,s,t[u+11],14,643717713),s=n(s,c,h,i,t[u+0],20,-373897302),i=n(i,s,c,h,t[u+5],5,-701558691),h=n(h,i,s,c,t[u+10],9,38016083),c=n(c,h,i,s,t[u+15],14,-660478335),s=n(s,c,h,i,t[u+4],20,-405537848),i=n(i,s,c,h,t[u+9],5,568446438),h=n(h,i,s,c,t[u+14],9,-1019803690),c=n(c,h,i,s,t[u+3],14,-187363961),s=n(s,c,h,i,t[u+8],20,1163531501),i=n(i,s,c,h,t[u+13],5,-1444681467),h=n(h,i,s,c,t[u+2],9,-51403784),c=n(c,h,i,s,t[u+7],14,1735328473),s=n(s,c,h,i,t[u+12],20,-1926607734),i=r(i,s,c,h,t[u+5],4,-378558),h=r(h,i,s,c,t[u+8],11,-2022574463),c=r(c,h,i,s,t[u+11],16,1839030562),s=r(s,c,h,i,t[u+14],23,-35309556),i=r(i,s,c,h,t[u+1],4,-1530992060),h=r(h,i,s,c,t[u+4],11,1272893353),c=r(c,h,i,s,t[u+7],16,-155497632),s=r(s,c,h,i,t[u+10],23,-1094730640),i=r(i,s,c,h,t[u+13],4,681279174),h=r(h,i,s,c,t[u+0],11,-358537222),c=r(c,h,i,s,t[u+3],16,-722521979),s=r(s,c,h,i,t[u+6],23,76029189),i=r(i,s,c,h,t[u+9],4,-640364487),h=r(h,i,s,c,t[u+12],11,-421815835),c=r(c,h,i,s,t[u+15],16,530742520),s=r(s,c,h,i,t[u+2],23,-995338651),i=a(i,s,c,h,t[u+0],6,-198630844),h=a(h,i,s,c,t[u+7],10,1126891415),c=a(c,h,i,s,t[u+14],15,-1416354905),s=a(s,c,h,i,t[u+5],21,-57434055),i=a(i,s,c,h,t[u+12],6,1700485571),h=a(h,i,s,c,t[u+3],10,-1894986606),c=a(c,h,i,s,t[u+10],15,-1051523),s=a(s,c,h,i,t[u+1],21,-2054922799),i=a(i,s,c,h,t[u+8],6,1873313359),h=a(h,i,s,c,t[u+15],10,-30611744),c=a(c,h,i,s,t[u+6],15,-1560198380),s=a(s,c,h,i,t[u+13],21,1309151649),i=a(i,s,c,h,t[u+4],6,-145523070),h=a(h,i,s,c,t[u+11],10,-1120210379),c=a(c,h,i,s,t[u+2],15,718787259),s=a(s,c,h,i,t[u+9],21,-343485551),i=l(i,d),s=l(s,p),c=l(c,m),h=l(h,f)}return Array(i,s,c,h)}function s(t,e,i,s,o,n){return l(c(l(l(e,t),l(s,n)),o),i)}function o(t,e,i,o,n,r,a){return s(e&i|~e&o,t,e,n,r,a)}function n(t,e,i,o,n,r,a){return s(e&o|i&~o,t,e,n,r,a)}function r(t,e,i,o,n,r,a){return s(e^i^o,t,e,n,r,a)}function a(t,e,i,o,n,r,a){return s(i^(e|~o),t,e,n,r,a)}function l(t,e){var i=(65535&t)+(65535&e),s=(t>>16)+(e>>16)+(i>>16);return s<<16|65535&i}function c(t,e){return t<<e|t>>>32-e}function h(t){for(var e=Array(),i=(1<<p)-1,s=0;s<t.length*p;s+=p)e[s>>5]|=(t.charCodeAt(s/p)&i)<<s%32;return e}function u(t){for(var e=d?"0123456789ABCDEF":"0123456789abcdef",i="",s=0;s<4*t.length;s++)i+=e.charAt(t[s>>2]>>s%4*8+4&15)+e.charAt(t[s>>2]>>s%4*8&15);return i}var d=0,p=8;return e(t)};if(window.login_status="",window.logout_status="",window.renew_status="",window.PassportCardList=[],window.PassportSC={version:27,versionDetail:"New edition between 2013-08 to 2013-10 sohu passport team",appid:9999,max_line_length:30,domain:"",cookie:!1,email:"",bindDomainSelector:!0,autopad:"",autoRedirectUrl:"",loginRedirectUrl:"",logoutRedirectUrl:"",selectorTitle:"请选择您的用户账号类型",registerUrl:"https://passport.sohu.com/web/signup.jsp",recoverUrl:"https://passport.sohu.com/web/recover.jsp",postru:"",emailPostfix:!1,curDSindex:-1,usePost:1,successCalledFunc:!1,curCardIndex:0,loginSuccCallbackName:"loginSuccessCallFunction",loginFailCallbackName:"loginFailCallFunction",returnUrl:"",oElement:!1,rootElement:!1,dsElement:!1,sElement:!1,cElement:!1,dsAnchor:!1,emailInput:!1,passwdInput:!1,pcInput:!1,loginMsg:!1,iElement:!1,isSetFocus:!0,showEmailInit:!0,loginProtocol:"https:"===window.location.protocol?"https":"http",setCookieProtocol:"https:"===window.location.protocol?"https":"http",http_url:!1,loginUrl:"://passport.sohu.com/user/login",eInterval:!1,maxIntervalCount:100,intervalCount:0,state:"0000",postLoginClicked:!1,postLoginTimeout:!1,postLoginTimeoutTime:1e4,defualtRemPwd:"",isShowRemPwdMsg:0,campImg:"http://js.sohu.com/passport/images/pic007.gif",campImgAlt:"大本营",campUrl:"http://blog.sohu.com/camp?from=",cardTitle:"上搜狐，知天下",firstDomain:"",defaultApp:"",domainPool:["chinaren.com","sogou.com"],domainList:["sohu.com","uniqname","chinaren.com","sogou.com","vip.sohu.com","17173.com","focus.cn","game.sohu.com","37wanwan.com"],appList:{1051:"news_say",1017:"pp",1019:"blog",1073:"t",1074:"tv",1000:"mail",1001:"club",1062:"bai",1005:"alumni",10050:"chinaren",1038:"crclub",1039:"group",1021:"music",1010:"say",1042:"cbbs",1028:"focus",1029:"17173",1013:"vip",1035:"rpggame",1044:"pinyin",1022:"relaxgame"},appName:{news_say:"我来说两句",pp:"相册",blog:"博客",t:"微博",tv:"视频",mail:"邮件",club:"社区",bai:"白社会",alumni:"校友录",chinaren:"ChinaRen",crclub:"CR社区",group:"群组",music:"音乐盒",say:"说吧",cbbs:"校友论坛",focus:"焦点房产",17173:"游戏论坛",vip:"vip邮箱",rpggame:"RPG游戏",pinyin:"输入法",relaxgame:"休闲游戏"},appUrl:{news_say:"http://i.sohu.com/scomment/home/all/",pp:"http://pp.sohu.com/",blog:"http://blog.sohu.com/",t:"http://t.sohu.com",tv:"http://tv.sohu.com",mail:"http://mail.sohu.com/",club:"http://club.sohu.com",bai:"http://bai.sohu.com",alumni:"http://class.chinaren.com",chinaren:"",crclub:"http://club.chinaren.com",group:"http://i.chinaren.com/group",say:"http://s.sogou.com",music:"http://mbox.sogou.com/",cbbs:"http://cbbs.chinaren.com",focus:"http://www.focus.cn",17173:"http://bbs.17173.com",vip:"http://vip.sohu.com",rpggame:"http://game.sohu.com",pinyin:"http://pinyin.sogou.com",relaxgame:"http://game.sohu.com/index2.htm"},appPool:!1,bottomRow:[],recomServ:[],reverseFirstDomain:!1,showEmailInputTip:!0,usePostFix:!0,gotohref:function(t){var e;e=document.createElement("a"),e.setAttribute("href",t),document.body.appendChild(e),e.click()},getDomain:function(){return document.domain.split(".").slice(-2).join(".")},addCookie:function(t,e,i,s){""===this.domain&&(this.domain=this.getDomain());var o=t+"="+escape(e)+"; path=/; domain=."+(s?s:this.domain)+";";if(i>0){var n=new Date;n.setTime(n.getTime()+3600*i*1e3),o+="expires="+n.toGMTString()+";"}document.cookie=o},getCookie:function(t){if(!t)return"";for(var e=document.cookie.split("; "),i=0;i<e.length;i++)if(0===e[i].indexOf(t+"="))return e[i].substr(t.length+1);return""},deleteCookie:function(t){""===this.domain&&(this.domain=this.getDomain());var e=new Date;e.setTime(e.getTime()-1e5);var i=this.getCookie(t);document.cookie=t+"="+i+"; expires="+e.toGMTString()+"; path=/; domain=."+this.domain+";"},preventEvent:function(t){try{t.cancelBubble=!0,t.returnValue=!1,t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}catch(e){}},getPosition:function(t,e){for(var i=0;t;)i+=t[e],t=t.offsetParent;return i},getTime:function(){return(new Date).getTime()},getHead:function(){return document.getElementsByTagName("head")[0]},getBody:function(){return document.getElementsByTagName("body")[0]},strip:function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},reportMsg:function(t){var e="";switch(t.toString()){case"1":e="请输入通行证账号";break;case"2":e="通行证账号为邮件地址格式";break;case"3":e="账号后缀必须为"+arguments[1];break;case"4":e="请输入通行证密码";break;case"5":var i=this.strip(this.emailInput.value);e=i.lastIndexOf("@focus.cn")>0?"账号或密码错误!咨询电话:010-58511234":"账号或密码错误";break;case"6":e="登录超时，请稍后重试";break;case"7":e="登录失败，请重试";break;case"8":e="网络故障，退出失败，请重新退出";break;case"9":e="登录失败，请稍后重试";break;case"10":e="您登录过于频繁，请24小时后再试";break;case"11":e="检测到浏览器cookie被禁用，请启用cookie后重试";break;case"12":e="服务器故障，请稍后再试";break;case"13":e='账号已被锁定，请先到<a href="http://hudun.sohu.com/help/help9.html" target="blank">狐盾</a>解锁';break;case"14":e="动态密码错误，请重新输入";break;case"15":e="请输入动态密码";break;case"16":e="账号未激活，请先进入邮箱激活账号";break;case"17":e="账号已被锁定，请联系客服";break;case"18":e="验证码错误";break;case"19":e="用户IP已被限制";break;case"20":e="账号或密码错误";break;case"21":e="账号被狐盾锁定，请进入狐盾解锁！";break;default:e="登录错误，请稍后重试"}this.showMsg(e)},showMsg:function(t){this.loginMsg&&(this.loginMsg.innerHTML=t)},cookieHandle:function(){return this.cookie||this.parsePassportCookie(),this.cookie&&""!==this.cookie.userid?this.cookie.userid:""},getDisplayName:function(){var t=this.cookieHandle(),e=t.split("@")[0],i=/^1\d{10}$/;return i.test(e)?e.substring(0,3)+"****"+e.substring(7):t},parseLastDomain:function(t){this.emailPostfix=[];for(var e="",i="",s=[],o=document.cookie.split("; "),n=0;n<o.length;n++)if(0===o[n].indexOf("lastdomain=")){try{s=unescape(o[n].substr(11)).split("|")}catch(r){}break}var a=0,l="";if(s.length>=3){for(var c=Base64.decode(s[1]),h=c.split("|"),n=h.length-1;n>=0;n--)""!==h[n]&&(this.emailPostfix[a]=h[n],a++,l=h[n]);/^.*@.{1,}\.sohu\.com$/.test(l)&&(l=""),this.showEmailInit&&this.emailInput&&(this.emailInput.value=l)}if(""!==this.firstDomain){for(var u in t)if(this.firstDomain==t[u]){i=t[u];break}""!==i&&(this.emailPostfix[a]=i,a++)}document.domain.indexOf("game.sohu.com")>=0&&(e="game.sohu.com",this.emailPostfix[a]=e,a++),this.emailPostfix[a]=this.domain,a++;for(var d in t)"string"==typeof t[d]&&t[d]!=this.domain&&t[d]!=e&&t[d]!=i&&(this.emailPostfix[a]=t[d],a++)},drawPassport:function(element){if("object"==typeof element){if(0==PassportCardList.length&&(PassportCardList[0]=this),!this.successCalledFunc)try{this.successCalledFunc=eval("drawAppInfo")}catch(e){this.successCalledFunc=this.drawPassportInfo}if(this.init(element),!this.cookie||""==this.cookie.userid&&""==this.relationHandle())this.drawLoginForm();else{if(""!=this.autopad){var userid=""!=this.relationHandle()?this.relationHandle():this.cookie.userid,at=userid.lastIndexOf("@");if(at>0&&this.autopad.lastIndexOf(userid.substr(at+1))<0)return void this.drawLoginForm()}""!=this.autoRedirectUrl?PassportSC.gotohref(this.autoRedirectUrl):this.drawPassportCard()}}},init:function(t){this.rootElement=t;var e=null===this.selectorTitle||0===this.selectorTitle.length;this.rootElement.innerHTML='<div class="ppselecter" style="display: none;border:1px solid #B6D3FC; border-top:0 none;"><table width="100%" cellspacing="0" cellpadding="0" style="table-layout:fixed;"><tbody><tr>'+(e?"":'<td style="" class="ppseltit" id="ppseltitId">'+this.selectorTitle+"</td>")+"</tr><tr>"+(e?'<td height="0"></td>':'<td height="2"></td>')+'</tr><tr><td></td></tr></tbody></table></div><div style="display: none;"></div><div class="passportc"></div>',this.dsElement=this.rootElement.childNodes[0],this.sElement=this.rootElement.childNodes[1],this.cElement=this.rootElement.childNodes[2],this.dsAnchor=this.dsElement.firstChild.rows[2].firstChild,this.domain=this.getDomain(),this.parseLastDomain(this.domainList),this.parseAppid(),this.parsePassportCookie(),""==this.postru&&(this.postru=document.location.href)},parseAppid:function(){var t=this.appid.toString(),e=0;this.appPool=new Array;for(var i in this.appList){var s=this.appList[i];"string"==typeof s&&(i==t?this.defaultApp=this.appName[s]:("1028"==i?(this.appPool[e]={app:"focus",name:"北京业主论坛",url:"http://house.focus.cn/group/yezhu.php"},e++,this.appPool[e]={app:"focus",name:"装修论坛",url:"http://home.focus.cn/group/group_forum.php"}):this.appPool[e]={app:s,name:this.appName[s],url:this.appUrl[s]},e++))}},parsePassportCookie:function(){for(var t,e=document.cookie.split("; "),i=0;i<e.length;i++){if(0===e[i].indexOf("ppinf=")){t=e[i].substr(6);break}if(0===e[i].indexOf("ppinfo=")){t=e[i].substr(7);break}if(0===e[i].indexOf("passport=")){t=e[i].substr(9);break}}if("undefined"==typeof t)return void(this.cookie=!1);try{var s=unescape(t).split("|");if("1"==s[0]||"2"==s[0]){var o=Base64.decode(s[3]);return void this._parsePassportCookie(o)}}catch(n){}},_parsePassportCookie:function(t){var e=t.split("|");this.cookie={};for(var i,s,o,n=0,r=e.length;r>n;n++)0!==e[n].length&&(o=e[n].split(":"),3===o.length&&parseInt(o[1],10)===o[2].length&&(i=o[0],s=o[2],this.cookie[i]=s));relation_userid=this._parserRelation(),relation_userid&&(this.cookie[k]=relation_userid)},_parserRelation:function(){var t=this.cookie.relation;if(t)for(var e=t.split(";"),i=0;i<e.length;i++)for(var s=e[i].split(","),o=s[2].split("#"),n=0;n<o.length;n++)if(this.appid==o[n])return s[0];return""},doLogin:function(){var t=this.strip(this.emailInput.value),e=this.strip(this.passwdInput.value),i=1==this.pcInput.checked?1:0;if(""==t)return this.reportMsg("1"),this.emailInput.focus(),!1;if(""!=this.autopad){var s=t.substr(t.lastIndexOf("@")+1);if(this.autopad.lastIndexOf(s)<0)return this.reportMsg("3",this.autopad),this.emailInput.focus(),this.passwdInput.value="",!1}return""==e?(this.reportMsg("4"),this.passwdInput.value="",this.passwdInput.focus(),!1):1===this.usePost?this.postLoginClicked?!1:this.doPostLogin():this.eInterval?!1:(arguments[0]&&PassportCardList[index].doLogin(),login_status="",this.intervalCount=0,this.sElement.innerHTML="",this.loginHandle(t,e,i,this.sElement,this.loginFailCall.bindFunc(this),this.loginSuccessCall.bindFunc(this)))},doPostLogin:function(){var t=this;this.postLoginClicked=!0,this.postLoginTimeout=setTimeout(function(){t.postLoginClicked=!1,t.reportMsg("6")},this.postLoginTimeoutTime);for(var e,i=document.forms,s=0,o=i.length;o>s;s++)if("loginform"==i[s].name){e=i[s];break}if(!e)return document.location.href=this.loginProtocol+"://passport.sohu.com",!1;var n=getBrowserType(),r=screen.width,a=1==this.pcInput.checked?1:0,l="https:"==window.location.protocol?1:0;document.domain=this.getDomain();var c=this.getDomain();if(!document.getElementById("sohuPassportFrame")){var h;try{h=document.createElement('<iframe name="sohuPassportFrame"></iframe>')}catch(u){h=document.createElement("iframe"),h.name="sohuPassportFrame"}h.id="sohuPassportFrame",h.style.width="0px",h.style.height="0px",h.style.display="none",document.body.appendChild(h)}try{this.addHiddenInput(e,"appid",this.appid),this.addHiddenInput(e,"loginSuccessCallFunction","postLoginSuccessCall"),this.addHiddenInput(e,"loginFailCallFunction","postLoginFailCall"),this.addHiddenInput(e,"domain",c),this.addHiddenInput(e,"ru",this.postru),this.addHiddenInput(e,"b",n),this.addHiddenInput(e,"w",r),this.addHiddenInput(e,"v",this.version),this.addHiddenInput(e,"persistentcookie",a),this.addHiddenInput(e,"isSLogin",l)}catch(u){return!1}return e.target="sohuPassportFrame",e.method="post",e.action=this.loginProtocol+this.loginUrl,this.sendLog(document.getElementsByTagName("head")[0],"beginLogin","0"),!0},addHiddenInput:function(t,e,i){if("object"==typeof t||"form"===t.tagName.toLowerCase()){for(var s=document.getElementsByTagName("input",t),o=0,n=s.length;n>o;o++)if(e===s[o].getAttribute("name"))return void("persistentcookie"===e&&(s[o].value=i));var r=document.createElement("input");r.type="hidden",r.name=e,r.value=i,t.appendChild(r)}},loginHandle:function(t,e,i,s,o,n){if("object"!=typeof s)return!1;if(!checkCookieEnabled())return o(),!1;login_status="";var r=getBrowserType(),a=screen.width;""==this.domain&&(this.domain=this.getDomain());var l=this.getTime(),c=MD5(e),h=this.getTime(),u="";document.getElementById("stoken")&&(u=PassportSC.strip(document.getElementById("stoken").value)),this.http_url=("https"==this.loginProtocol&&l>MIN_HTTS_TIMESTAMP?"https":"http")+"://passport.sohu.com/act/login?userid="+("function"==typeof encodeURIComponent?encodeURIComponent(t):t)+"&password="+c+"&appid="+this.appid+"&persistentcookie="+i+("https"==this.loginProtocol&&l>MIN_HTTS_TIMESTAMP?"&isSLogin=1":"")+"&s="+l+"&b="+r+"&w="+a+"&pwdtype=1&v="+this.version+"&t="+h+"&stoken="+u+("sohu.com"!=this.domain?"&domain="+this.domain:""),"https"==this.loginProtocol?this.state="1100":this.state="2200",this.sendLog(s,"beginLogin","0");var d=document.createElement("script");d.src=this.http_url,d.id="loginele",s.appendChild(d);var p=this;return this.eInterval=setInterval(function(){p.loginIntervalProc(o,n,s)},100),!1},loginIntervalProc:function(t,e,i){if(""==login_status&&this.intervalCount<this.maxIntervalCount)return void this.intervalCount++;if(clearInterval(this.eInterval),this.eInterval=!1,""==login_status&&this.intervalCount>=this.maxIntervalCount){var s="";"2200"==this.state?(s="1",this.state="2210"):"1200"==this.state&&(this.state="1210",s="3"),this.sendLog(i,"login timeout"+this.state,s)}if("success"==login_status&&(this.addCookie("pp_login_time",this.loginProtocol+"|"+this.email+"|"+this.appid+"|"+getBrowserType()+"|"+this.intervalCount+"|"+this.state,-1,"sohu.com"),"1200"==this.state&&this.sendLog(i,"login success","2")),"success"!=login_status||this.intervalCount>=this.maxIntervalCount)if("https"==this.loginProtocol&&""==login_status){this.intervalCount=0,this.loginProtocol="http",this.state="1200","s"==this.http_url.charAt(4)&&(this.http_url="http"+this.http_url.substr(5)),"sohu.com"!=this.domain&&(this.http_url+="&domain="+this.domain);var o=document.createElement("script");o.src=this.http_url,i.appendChild(o);var n=this;this.eInterval=setInterval(function(){n.loginIntervalProc(t,e,i)},100)}else t();else""==this.loginRedirectUrl?this.autoProcAllDomain("login",i):this.addCookie("crossdomain",this.getTime(),336),e()},loginFailCall:function(){if(this.sElement.innerHTML="",this.drawLoginForm(),this.intervalCount>=this.maxIntervalCount)this.reportMsg("6"),this.emailInput.focus();else if("error3"==login_status||"error2"==login_status)this.reportMsg("5"),this.passwdInput.focus();else if("error5"==login_status)this.reportMsg("10"),this.passwdInput.focus();else{if("error13"==login_status)return void(window.location=this.loginProtocol+"://passport.sohu.com/web/remind_activate.jsp");"error11"==login_status?(this.reportMsg("12"),this.passwdInput.focus()):"error8"==login_status?(this.reportMsg("13"),this.passwdInput.focus()):"error9"==login_status?this.reportMsg("14"):checkCookieEnabled()?(this.reportMsg("9"),this.passwdInput.focus()):(this.reportMsg("11"),this.emailInput.focus())}},loginSuccessCall:function(){this.parsePassportCookie(),this.cookie&&""!=this.cookie.userid?(this.email="",""!=this.loginRedirectUrl?this.gotohref(this.loginRedirectUrl):this.drawPassportCard()):(this.drawLoginForm(),this.reportMsg("7"))},postLoginSuccessCall:function(){this.postLoginTimeout&&(clearTimeout(this.postLoginTimeout),this.postLoginTimeout=!1),this.postLoginClicked=!1,this.loginSuccessCallFunction()},postLoginFailCall:function(){this.postLoginTimeout&&(clearTimeout(this.postLoginTimeout),this.postLoginTimeout=!1),this.postLoginClicked=!1,this.loginFailCallFunction(arguments[0])},loginSuccessCallFunction:function(){},loginFailCallFunction:function(t){},drawPassportCard:function(){this._drawPassportCard();var t=document.getElementById("ppcontid");t.onclick=this.doClickLink.bindFunc(this),this.initiElement();try{if(null!=this.iElement)this.successCalledFunc(this.iElement);else try{this.drawPassportInfo()}catch(e){}}catch(e){this.drawPassportInfo()}},_drawPassportCard:function(){},doClickLink:function(t){var e=window.event?window.event:t,i=e.srcElement||e.target,s=i.tagName.toLowerCase(),o=this.cookie.userid,n=document.location.href;if("img"==s&&(s=i.parentNode.tagName.toLowerCase(),i=i.parentNode),"a"==s){var r=document.createElement("script");r.src=this.loginProtocol+"://passport.sohu.com/web/golog.jsp?userid="+o+"&fappid="+this.appid+"&furl="+n+"&turl="+i,this.iElement.appendChild(r)}},initiElement:function(){this.iElement=document.getElementsByClassName("listContA")[0]},drawPassportWait:function(t){},drawPassportInfo:function(){},loginSuccessCallback:function(){},loginFailCallback:function(){},doLogout:function(){this.eInterval||(this.intervalCount=0,this.sElement.innerHTML="",this.logoutHandle(this.sElement,this.logoutFailCall.bindFunc(this),this.logoutSuccessCall.bindFunc(this,"dd")))},logoutHandle:function(t,e,i){if("object"!=typeof t)return!1;logout_status="",""==this.domain&&(this.domain=this.getDomain());var s=this.getTime(),o=this.loginProtocol+"://passport.sohu.com/act/logout?s="+s+"&appid="+this.appid;"sohu.com"!=this.domain&&(o+="&domain="+this.domain);var n=document.createElement("script");n.src=o,t.appendChild(n);var r=this;this.eInterval=setInterval(function(){r.logoutIntervalProc(e,i,t)},100)},logoutIntervalProc:function(t,e,i){if(""==logout_status&&this.intervalCount<this.maxIntervalCount)return void this.intervalCount++;if(clearInterval(this.eInterval),this.eInterval=!1,""==logout_status&&this.intervalCount>=this.maxIntervalCount){t();var s=document.createElement("script"),o=getBrowserType();return s.src=this.loginProtocol+"://passport.sohu.com/web/cardlog.jsp?desc=logout timeout&loginProtocol="+this.loginProtocol+"&userid="+this.email+"&appid="+this.appid+"&browserType="+o,void i.appendChild(s)}return"success"!=logout_status?void t():(""==this.logoutRedirectUrl?this.autoProcAllDomain("logout",i):this.addCookie("crossdomain_logout",this.getTime(),336),void e())},logoutFailCall:function(){this.sElement.innerHTML="",this.reportMsg("8")},logoutSuccessCall:function(t){this.parseLastDomain(this.domainList),this.cookie=!1,this.drawLoginForm();for(var e=0;e<PassportCardList.length;e++)e!=this.curCardIndex&&PassportCardList[e].drawLoginForm();try{logoutApp()}catch(i){}},renewCookie:function(t,e,i){if("object"!=typeof t)return!1;""==this.domain&&(this.domain=this.getDomain());var s=this.getTime(),o=this.loginProtocol+"://passport.sohu.com/sso/renew.jsp?s="+s;"sohu.com"!=this.domain&&(o+="&domain="+this.domain);var n=document.createElement("script");n.src=o,t.appendChild(n);var r=this;return this.eInterval=setInterval(function(){r.renewIntervalProc(e,i,t)},100),!1},renewIntervalProc:function(t,e,i){if(""==renew_status&&this.intervalCount<this.maxIntervalCount)return void this.intervalCount++;if(clearInterval(this.eInterval),this.eInterval=!1,"success"!=renew_status||this.intervalCount>=this.maxIntervalCount)try{t()}catch(s){}else{this.autoProcAllDomain("renew",i);try{e()}catch(s){}}},getRanServ:function(){var t=this.recomServ.length;if(0==t)return"";var e=Math.floor(t*Math.random()),i='<a href="'+this.recomServ[e].url+'" target="_blank">'+this.recomServ[e].name+"</a>";if(1==t)return i;for(var s=Math.floor(t*Math.random());e==s;)s=Math.floor(t*Math.random());return i+=' | <a href="'+this.recomServ[s].url+'" target="_blank">'+this.recomServ[s].name+"</a>"},_drawLoginForm:function(){},drawLoginForm:function(){this._drawLoginForm();for(var t=this.cElement.getElementsByTagName("input"),e=0;e<t.length;e++)"email"==t[e].name&&(this.emailInput=t[e]),"password"==t[e].name&&(this.passwdInput=t[e]),"persistentcookie"==t[e].name&&(this.pcInput=t[e]);if(this.loginMsg=document.getElementsByClassName("error")[0],1==this.isShowRemPwdMsg){var i=this;this.pcInput.onclick=function(){if(0!=i.pcInput.checked){var t=window.confirm("浏览器将在两周内保持通行证的登录状态，网吧或公共机房上网者请慎用。您能确认本次操作吗？");0==t&&(i.pcInput.checked=!1)}}}this.bindSelector(),this.autoFillUserId();var i=this;""==this.emailInput.value?this.isSetFocus&&setTimeout(function(){i.emailInput.focus()},50):this.isSetFocus&&"通行证账号/手机号"!=this.emailInput.value&&setTimeout(function(){i.passwdInput.focus()},50)},autoProcAllDomain:function(t,e){var i=this.crossDomainIframeUrl(t);if(i){var s=document.createElement("iframe");s.src=i,s.style.width="0",s.style.height="0",e.appendChild(s)}},doCrossDomainCookie:function(t,e){if("object"==typeof t){var i="crossdomain";"logout"==e&&(i="crossdomain_logout");var s=this.getCookie(i);if(""!=s&&"0"!=s){""==this.domain&&(this.domain=this.getDomain());var o=this.crossDomainIframeUrl(e);if(o){var n=document.createElement("iframe");n.src=o,n.style.width="0",n.style.height="0",n.style.display="none",t.appendChild(n),this.deleteCookie(i)}}}},crossDomainUrl:function(t,e){var i=this.getTime(),s=this.setCookieProtocol+"://passport.sohu.com/sso/crossdomain.jsp?s="+i+"&action="+t+"&domain="+e;return s},crossDomainIframeUrl:function(t){var e=this.setCookieProtocol+"://"+this.getPassportDomain()+"/sso/crossdomain_all.jsp?action="+t;return e},getPassportDomain:function(){""===this.domain&&(this.domain=this.getDomain());var t="passport."+this.domain;return this.domain in{"focus.cn":"","17173.com":"","37wanwan.com":"","51f.com":""}&&(t="pass."+this.domain),t},setDomainCookie:function(t,e,i,s){login_status="",crossdomain_status="";var o=this.crossDomainUrl("login",e);o&&(newScript=document.createElement("script"),newScript.src=o,t.appendChild(newScript));var n=this;this.eInterval=setInterval(function(){n.setCookieIntervalProc(t,i,s)},100)},setCookieIntervalProc:function(t,e,i){return""!=crossdomain_status?(clearInterval(this.eInterval),this.eInterval=!1,void i()):""==login_status&&this.intervalCount<this.maxIntervalCount?void this.intervalCount++:(clearInterval(this.eInterval),this.eInterval=!1,"success"!=login_status||this.intervalCount>=this.maxIntervalCount?void i():void e())},autoFillUserId:function(){if(this.showEmailInputTip)return void(this.showEmailInputTip=!1);var t=this.getCookie("pptmpuserid");if(this.email.length>0?this.emailInput.value=this.email:this.emailInput.value=t,t.length>0){var e=this;setTimeout(function(){e.deleteCookie("pptmpuserid")},1e3)}},downDSindex:function(){if(null!=this.dsAnchor.firstChild){for(var t=this.dsAnchor.firstChild.rows,e=0;e<t.length&&t[e].firstChild.idx!=this.curDSindex;e++);e>=t.length-1?this.curDSindex=t[0].firstChild.idx:this.curDSindex=t[e+1].firstChild.idx}},upDSindex:function(){if(null!=this.dsAnchor.firstChild){for(var t=this.dsAnchor.firstChild.rows,e=-1,i=0;i<t.length&&t[i].firstChild.idx!=this.curDSindex;i++)e=t[i].firstChild.idx;i==t.length?this.curDSindex=t[0].firstChild.idx:-1==e?this.curDSindex=t[t.length-1].firstChild.idx:this.curDSindex=e}},findDSindex:function(t){try{for(var e=this.dsAnchor.firstChild.rows,i=0;i<e.length;i++)if(e[i].firstChild.idx==t)return e[i].firstChild}catch(s){}return!1},clearFocus:function(t){"number"!=typeof t&&(t=this.curDSindex);try{var e=this.findDSindex(t);e.className="",e.style.fontWeight="normal"}catch(i){}},setFocus:function(t){"number"!=typeof t&&(t=this.curDSindex);try{var e=this.findDSindex(t);e.className="active"}catch(i){}},fillEmailSelect:function(){var t=this.emailInput.value,e=/^[\u4e00-\u9fa5,a-zA-Z0-9-_.@]{1,100}$/;if(""==t||!e.test(t))return this.dsElement.style.display="none",void(this.curDSindex=-1);var i="",s="",o=t.lastIndexOf("@");0>o?s=t:o==t.length-1?s=t.substr(0,o):(s=t.substr(0,o),i=t.substr(o+1));var n=this.getPosition(this.emailInput,"offsetLeft")-this.getPosition(this.cElement,"offsetLeft");document.all&&!document.addEventListener&&(n+=1),this.dsElement.style.zIndex="2000",this.dsElement.style.paddingRight="0",this.dsElement.style.paddingLeft="0",this.dsElement.style.paddingTop="0",this.dsElement.style.paddingBottom="0",this.dsElement.style.backgroundColor="white",this.dsElement.style.display="block";var r=document.createElement("TABLE");r.width="100%",r.style.tableLayout="fixed",r.cellSpacing=0,r.cellPadding=3;var a=document.createElement("TBODY");r.appendChild(a);var l=0,c=!1,h=!1,u=-1,d="",p="",m=this.emailPostfix,f=/^1\d{0,10}$/,g=/^\d*$/;g.test(t)&&(m=""===this.autopad?["qq.com","focus.cn"]:["qq.com","focus.cn",this.autopad]),f.test(t)&&(m=""===this.autopad?["mobile","qq.com","focus.cn"]:["mobile","qq.com","focus.cn",this.autopad]);for(var v=0;v<m.length;v++){var C=m[v];if("string"==typeof C&&0!=C.length&&(""==i||0==C.lastIndexOf(i))){if(C.lastIndexOf("@")>=0){if(tmp_pos=C.lastIndexOf("@"),""!=this.autopad&&this.autopad.lastIndexOf(C.substring(tmp_pos+1))<0)continue;if(p=C.substring(0,tmp_pos),0!=p.indexOf(s))continue;p==s&&(d=C.substring(C.lastIndexOf("@")+1)),h=!0}else if(""!=this.autopad&&this.autopad.lastIndexOf(C)<0)continue;if(C!=d){var w=C.split("@").slice(-1).toString(),y=w.match(/[^\x00-\xff]/gi);if(null==y||0==y.length){l++,-1==u&&(u=v),this.curDSindex==v&&(c=!0);var b=document.createElement("TR"),I=document.createElement("TD");I.nowrap="true",I.align="left","mobile"==C||"uniqname"==C?I.innerHTML=s:0==h?this.usePostFix?I.innerHTML=s+"@"+C:I.innerHTML=s:this.usePostFix?I.innerHTML=C:I.innerHTML=C.substring(0,C.lastIndexOf("@")),I.title=I.innerHTML,I.style.width="166px",I.style.lineHeight="1.6em",I.style.textOverflow="ellipsis",I.style.whiteSpace="nowrap",I.style.overflow="hidden",
I.id="email_postfix_"+v,I.idx=v;var k=this;I.onmouseover=function(){k.clearFocus(),k.curDSindex=this.idx,k.setFocus(),this.style.cursor="pointer"},I.onclick=function(){k.doSelect()},b.appendChild(I),a.appendChild(b),h=!1}}}}l>0?(this.dsAnchor.innerHTML="",this.dsAnchor.appendChild(r),0==c&&(this.curDSindex=u),this.setFocus()):(this.dsElement.style.display="none",this.curDSindex=-1)},doSelect:function(){var t=this.findDSindex(this.curDSindex);if(t){var e=t.innerHTML;e&&(this.emailInput.value=e.replace(/&amp;/g,"&"))}if(this.dsElement.style.display="none",""!=this.emailInput.value)try{this.passwdInput.focus()}catch(i){}},blurUserid:function(){var t=this;setTimeout(function(){t.dsElement&&"none"!=t.dsElement.style.display&&(t.dsElement.style.display="none")},150)},checkKeyDown:function(t){t=t||window.event;var e=t.keyCode||t.which||t.charCode;if(38==e||40==e){if(1==t.shiftKey)return;this.clearFocus(),38==e?this.upDSindex():40==e&&this.downDSindex(),this.setFocus()}},checkKeyPress:function(t){t=t||window.event;var e=t.keyCode||t.which||t.charCode;if(13==e)this.preventEvent(t);else if(38==e||40==e){if(1==t.shiftKey)return;this.preventEvent(t),this.clearFocus(),38==e?this.upDSindex():40==e&&this.downDSindex(),this.setFocus()}else if(108==e||110==e||111==e||115==e){var i=this;setTimeout(function(){i.fillEmailSelect()},10)}},checkKeyUp:function(t){t=t||window.event;var e=t.keyCode||t.which||t.charCode;if(this.fillEmailSelect(),13==e&&this.doSelect(),!(7!=getBrowserType()&&4!=getBrowserType()||38!=e&&40!=e)){if(1==t.shiftKey)return;this.clearFocus(),38==e?this.upDSindex():40==e&&this.downDSindex(),this.setFocus()}},bindSelector:function(){if(this.bindDomainSelector&&(this.curDSindex=-1,"undefined"!=typeof this.emailInput))try{this.emailInput.addEventListener("keypress",this.checkKeyPress.bindFunc(this),!1),this.emailInput.addEventListener("keyup",this.checkKeyUp.bindFunc(this),!1),this.emailInput.addEventListener("blur",this.blurUserid.bindFunc(this),!1)}catch(t){try{this.emailInput.attachEvent("onkeydown",this.checkKeyDown.bindFunc(this)),this.emailInput.attachEvent("onkeypress",this.checkKeyPress.bindFunc(this)),this.emailInput.attachEvent("onkeyup",this.checkKeyUp.bindFunc(this)),this.emailInput.attachEvent("onblur",this.blurUserid.bindFunc(this))}catch(t){}}},drawPassportNew:function(t,e,i){if("object"==typeof t){var s=new Function;s.prototype=this;var o=PassportCardList.length,n=new s;n.successCalledFunc=i,n.appid=e,n.curCardIndex=o,n.isSetFocus=!1,PassportCardList[o]=n,drawPassportNewInit(o,t)}},drawPassportJS:function(){if(this.oElement&&"object"==typeof this.oElement){var t=this.getCookie("ppinf"),e="http://sso.passport.sohu.com/mirror/"+this.getPassportDomain()+"/"+t,i=document.createElement("script");i.src=e,ele.appendChild(i)}},doCrossDomainIframe:function(t){var e=document.createElement("iframe");e.src=t,e.style.width="0",e.style.height="0",e.id="ifr_crossdomain",PassportSC.oElement.appendChild(e)},sendLog:function(t,e,i){var s=document.createElement("script"),o=getBrowserType();s.src="//passport.sohu.com/web/cardlog.jsp?desc="+e+"&loginProtocol="+this.loginProtocol+"&userid="+this.email+"&appid="+this.appid+"&browserType="+o+"&status="+login_status+"&count="+this.intervalCount+"&max="+this.maxIntervalCount+"&flag="+i,t.appendChild(s)}},"undefined"==typeof PP_SETCROSSDOMAIN){var ele=document.getElementsByTagName("head")[0];"undefined"!=typeof PP_SETCOOKIEPROTOCOL&&(PassportSC.setCookieProtocol=PP_SETCOOKIEPROTOCOL),PassportSC.doCrossDomainCookie(ele,"login"),PassportSC.doCrossDomainCookie(ele,"logout")}"undefined"==typeof encodeURIComponent&&(PassportSC.usePost=1),3==getBrowserType()&&(5e3==screen.height||window.navigator.userAgent.lastIndexOf("Mini")>=0)&&(PassportSC.usePost=1)}(window);